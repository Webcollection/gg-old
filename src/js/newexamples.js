;(function () {

    // This file contains the code to define the graphics and then
    // renders them using data randomly generated by data.js.

    $(document).ready(function() {

        // Define graphics ...

        var scatterplot = gg({
            layers: [
                { geometry: 'line', mapping: { x: 'd', y: 'r', size: 'r', group: 't', color: 't' } },

                { geometry: 'point', mapping: { x: 'd', y: 'r + 5', size: 'r', group: 't', color: 't' } }
            ],
            scales: [
                { aesthetic: 'size', range: [.5, 5] }
            ],
            facets: { x: 'f', y: 'g'}

        });


        var w    = 1000;
        var h    = 700;
        var ex   = function () { return d3.select('#examples').append('span'); };

        var bigdata = _.map(_.range(0, 500), function(d) {
            g = Math.floor(Math.random() * 5);
            f = Math.floor(Math.random() * 5);
            t = Math.floor(Math.random() * 3)
            return {d:d, r:Math.random() + g, g: g, f:f, t:t};
        })
        scatterplot.renderer(w, h, ex())(bigdata)
    });
})();
